{"version":3,"file":"intersection.min.js","sources":["utils/toString.js","utils/isFunction.js","utils/isElement.js","utils/isObject.js","intersection.js"],"sourcesContent":["/**\n * Object 对象原型上的 toString 方法\n * ========================================================================\n * @method toString\n * @param {*} val\n * @returns {string}\n */\nconst toString = (val) => {\n  return Object.prototype.toString.apply(val)\n}\n\nexport default toString\n","import toString from './toString'\n\n/**\n * 检测测试数据是否为 Function 类型\n * ========================================================================\n * @method isFunction\n * @param {*} val - （必须）待检测的数据\n * @returns {boolean} 'val' 是 Function 类型返回 true，否则返回 false\n */\nconst isFunction = (val) => {\n  return typeof val === 'function' || toString(val) === '[object Function]'\n}\n\nexport default isFunction\n","import isObject from './isObject'\n\n/**\n * 检测数据是否为 HTMLElement DOM 节点\n * ========================================================================\n * @method isElement\n * @param {*} o\n * @returns {boolean}\n */\nconst isElement = (o) => {\n  return !!(isObject(o) && o.nodeName && o.tagName && o.nodeType === 1)\n}\n\nexport default isElement\n","import toString from './toString'\nimport isFunction from './isFunction'\n\n/**\n * 检测数据是否为 Object 类型\n * ========================================================================\n * @method isObject\n * @param {*} o\n * @returns {boolean}\n */\nconst isObject = (o) => {\n  return (\n    (toString(o) === '[object Object]' ||\n      typeof o === 'object' ||\n      isFunction(o)) &&\n    o !== null\n  )\n}\n\nexport default isObject\n","import isFunction from './utils/isFunction'\nimport isElement from './utils/isElement'\n\n/**\n * 通用的 IntersectionObserver 观察者处理器\n * ========================================================================\n * @method intersection\n * @param {Function} fn\n * @param {Object} [props]\n * @param {String} [props.selector]\n * @param {Object} [props.context]\n * @param {Object|HTMLElement} [props.root]\n * @param {Number|Array} [props.threshold]\n * @param {String} [props.rootMargin]\n * @return {IntersectionObserver}\n */\nconst intersection = (fn, props = {}) => {\n  const root = props.root || null\n  const selector = props.selector || '.outline-heading'\n  const context = props.context || null\n  const threshold = props.threshold || 0\n  const rootMargin = props.rootMargin || '0px 0px -90% 0px'\n  const options = {\n    rootMargin: rootMargin,\n    threshold: threshold\n  }\n  const Observer = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      if (entry.intersectionRatio > 0) {\n        if (isFunction(fn)) {\n          fn.call(context || entry.target, entry.target)\n        }\n      }\n    })\n  }, options)\n  const $root = isElement(root) ? root : document\n\n  if (root) {\n    options.root = root\n  }\n\n  $root.querySelectorAll(selector).forEach((section) => {\n    Observer.observe(section)\n  })\n\n  return Observer\n}\n\nexport default intersection\n"],"names":["toString","val","Object","prototype","apply","isFunction","isElement","o","isObject","nodeName","tagName","nodeType","fn","props","root","selector","context","threshold","options","rootMargin","Observer","IntersectionObserver","entries","forEach","entry","intersectionRatio","call","target","$root","document","querySelectorAll","section","observe"],"mappings":"6OAOA,MAAMA,EAAYC,GACTC,OAAOC,UAAUH,SAASI,MAAMH,GCCnCI,EAAcJ,GACI,mBAARA,GAAwC,sBAAlBD,EAASC,GCDzCK,EAAaC,MCCF,CAACA,IAEG,oBAAhBP,EAASO,IACK,iBAANA,GACPF,EAAWE,KACP,OAANA,EDLQC,CAASD,IAAMA,EAAEE,UAAYF,EAAEG,SAA0B,IAAfH,EAAEI,gBEMnC,CAACC,EAAIC,EAAQ,MAChC,MAAMC,EAAOD,EAAMC,MAAQ,KACrBC,EAAWF,EAAME,UAAY,mBAC7BC,EAAUH,EAAMG,SAAW,KAC3BC,EAAYJ,EAAMI,WAAa,EAE/BC,EAAU,CACdC,WAFiBN,EAAMM,YAAc,mBAGrCF,UAAWA,GAEPG,EAAW,IAAIC,sBAAsBC,IACzCA,EAAQC,SAASC,IACXA,EAAMC,kBAAoB,GACxBpB,EAAWO,IACbA,EAAGc,KAAKV,GAAWQ,EAAMG,OAAQH,EAAMG,OAE1C,GACD,GACDT,GACGU,EAAQtB,EAAUQ,GAAQA,EAAOe,SAUvC,OARIf,IACFI,EAAQJ,KAAOA,GAGjBc,EAAME,iBAAiBf,GAAUQ,SAASQ,IACxCX,EAASY,QAAQD,EAAQ,IAGpBX"}